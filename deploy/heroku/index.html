


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Springboard JVM SAAS starter.">
      
      
      
        <meta name="author" content="Happy Valley IO - https://www.happyvalley.io">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.1, mkdocs-material-5.1.6">
    
    
      
        <title>Deploy to Heroku</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4b9ffd7b.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploying-to-heroku" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Springboard" class="md-header-nav__button md-logo" aria-label="Springboard">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Springboard
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Deploy to Heroku
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/HappyValleyIO/springboard/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Springboard" class="md-nav__button md-logo" aria-label="Springboard">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Springboard
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/HappyValleyIO/springboard/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Welcome to Springboard" class="md-nav__link">
      Welcome to Springboard
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Deploy
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Deploy" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Deploy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Deploy to Heroku
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Deploy to Heroku" class="md-nav__link md-nav__link--active">
      Deploy to Heroku
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#minimum-viable-deployment" class="md-nav__link">
    Minimum Viable Deployment
  </a>
  
    <nav class="md-nav" aria-label="Minimum Viable Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-a-heroku-app" class="md-nav__link">
    Step 1: Create a Heroku App
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-a-pipeline-and-deploy" class="md-nav__link">
    Step 2: Create a pipeline and deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-enable-automatic-deploys" class="md-nav__link">
    Step 3: Enable automatic deploys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-making-a-change" class="md-nav__link">
    Step 4: Making a change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-merging-to-master-and-deploying-to-production" class="md-nav__link">
    Step 5: Merging to master and deploying to production
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-spinning-up-the-production-database" class="md-nav__link">
    Step 6: Spinning up the production database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-reflect-on-the-result" class="md-nav__link">
    Step 7: Reflect on the result
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-the-cli" class="md-nav__link">
    Connecting the CLI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-mailgun" class="md-nav__link">
    Adding Mailgun
  </a>
  
    <nav class="md-nav" aria-label="Adding Mailgun">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-adding-mailgun-to-your-production-application" class="md-nav__link">
    Step 1: Adding Mailgun to your production application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-updating-application-to-use-env-variables" class="md-nav__link">
    Step 2: Updating application to use env variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-jvm-metrics" class="md-nav__link">
    Adding JVM metrics
  </a>
  
    <nav class="md-nav" aria-label="Adding JVM metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-adding-the-metrics-to-the-app" class="md-nav__link">
    Step 1: Adding the metrics to the app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-viewing-the-metrics" class="md-nav__link">
    Step 2: Viewing the metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-staging" class="md-nav__link">
    Adding staging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-sentry" class="md-nav__link">
    Adding Sentry
  </a>
  
    <nav class="md-nav" aria-label="Adding Sentry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-enable-sentry-in-heroku" class="md-nav__link">
    Step 1: Enable sentry in Heroku
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-viewing-our-new-dashboard" class="md-nav__link">
    Step 2: Viewing our new dashboard
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-throwing-an-error" class="md-nav__link">
    Step 3: Throwing an error
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-optional-integrate-with-sentry-release" class="md-nav__link">
    Step 4: (Optional) Integrate with Sentry release
  </a>
  
    <nav class="md-nav" aria-label="Step 4: (Optional) Integrate with Sentry release">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#easy-option" class="md-nav__link">
    Easy option
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#harder-option" class="md-nav__link">
    Harder option
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-logdna" class="md-nav__link">
    Adding LogDNA
  </a>
  
    <nav class="md-nav" aria-label="Adding LogDNA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-enabling-the-add-on" class="md-nav__link">
    Step 1: Enabling the add-on
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-opening-logdna" class="md-nav__link">
    Step 2: Opening logdna
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Tutorials
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/static/" title="How to add a static page" class="md-nav__link">
      How to add a static page
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#minimum-viable-deployment" class="md-nav__link">
    Minimum Viable Deployment
  </a>
  
    <nav class="md-nav" aria-label="Minimum Viable Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-a-heroku-app" class="md-nav__link">
    Step 1: Create a Heroku App
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-a-pipeline-and-deploy" class="md-nav__link">
    Step 2: Create a pipeline and deploy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-enable-automatic-deploys" class="md-nav__link">
    Step 3: Enable automatic deploys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-making-a-change" class="md-nav__link">
    Step 4: Making a change
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-merging-to-master-and-deploying-to-production" class="md-nav__link">
    Step 5: Merging to master and deploying to production
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-spinning-up-the-production-database" class="md-nav__link">
    Step 6: Spinning up the production database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-reflect-on-the-result" class="md-nav__link">
    Step 7: Reflect on the result
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-the-cli" class="md-nav__link">
    Connecting the CLI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-mailgun" class="md-nav__link">
    Adding Mailgun
  </a>
  
    <nav class="md-nav" aria-label="Adding Mailgun">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-adding-mailgun-to-your-production-application" class="md-nav__link">
    Step 1: Adding Mailgun to your production application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-updating-application-to-use-env-variables" class="md-nav__link">
    Step 2: Updating application to use env variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-jvm-metrics" class="md-nav__link">
    Adding JVM metrics
  </a>
  
    <nav class="md-nav" aria-label="Adding JVM metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-adding-the-metrics-to-the-app" class="md-nav__link">
    Step 1: Adding the metrics to the app
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-viewing-the-metrics" class="md-nav__link">
    Step 2: Viewing the metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-staging" class="md-nav__link">
    Adding staging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-sentry" class="md-nav__link">
    Adding Sentry
  </a>
  
    <nav class="md-nav" aria-label="Adding Sentry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-enable-sentry-in-heroku" class="md-nav__link">
    Step 1: Enable sentry in Heroku
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-viewing-our-new-dashboard" class="md-nav__link">
    Step 2: Viewing our new dashboard
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-throwing-an-error" class="md-nav__link">
    Step 3: Throwing an error
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-optional-integrate-with-sentry-release" class="md-nav__link">
    Step 4: (Optional) Integrate with Sentry release
  </a>
  
    <nav class="md-nav" aria-label="Step 4: (Optional) Integrate with Sentry release">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#easy-option" class="md-nav__link">
    Easy option
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#harder-option" class="md-nav__link">
    Harder option
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-logdna" class="md-nav__link">
    Adding LogDNA
  </a>
  
    <nav class="md-nav" aria-label="Adding LogDNA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-enabling-the-add-on" class="md-nav__link">
    Step 1: Enabling the add-on
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-opening-logdna" class="md-nav__link">
    Step 2: Opening logdna
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/HappyValleyIO/springboard/edit/master/docs/deploy/heroku.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="deploying-to-heroku">Deploying to Heroku</h1>
<p><a href="https://www.heroku.com">Heroku</a> is a PaaS product that makes deploying your application easy. With its generous free tier it's a perfect way to kick off a new project.</p>
<p>It's easy to deploy a Springboard application with Heroku. We can also benefit tremendously from the Heroku add-on ecosystem:</p>
<ul>
<li><a href="https://mailgun.com">mailgun</a> as an SMTP server to send emails;</li>
<li><a href="https://sentry.io/welcome/">sentry</a> for error-tracking;</li>
<li><a href="https://logdna.com/">logdna</a> for log aggregation; and </li>
<li><a href="https://www.heroku.com/postgres">hosted postgresql</a> as a data store.</li>
</ul>
<p>You can check the other add-ons heroku comes with out of the box <a href="https://elements.heroku.com/addons">here</a>.</p>
<h2 id="minimum-viable-deployment">Minimum Viable Deployment</h2>
<p>There are a couple of ways that we can deploy to Heroku - they maintain excellent docs on this <a href="https://devcenter.heroku.com/categories/deployment">here</a>. 
The deployment mechanism we'll be focusing on is the GitHub integration. We'll be building out a production-ready pipeline here. 
We'll connect our app to a Springboard based GitHub repo and deploy the application with a database.</p>
<p>One of the primary benefits to working in Springboard is simplicity of building and deploying. It's a single, stateless JVM 
instance that's connected to a database. Most of the tricky first-time setup has already been done in the gradle build scripts. 
As such, anything that can deploy a Spring Boot project can deploy a Springboard project without difficulty. </p>
<p>As it happens, Heroku has terrific integration with Spring Boot so deploying a live, production-ready application is pretty simple.   </p>
<p>I'm going to presume you've signed up to a Heroku account, if you haven't <a href="https://signup.heroku.com/">then do so</a>, login to the Heroku dashboard and get ready to go. </p>
<h3 id="step-1-create-a-heroku-app">Step 1: Create a Heroku App</h3>
<p>If you've just signed up to Heroku you'll be presented with an empty dashboard. On this page, click the <code>New</code> button and select <code>App</code>.</p>
<p><a href="../images/heroku-empty-dashboard.png"><img alt="heroku empty dashboard" src="../images/heroku-empty-dashboard.png" /></a></p>
<p>This will take you to the create application page:</p>
<p><a href="../images/heroku-create-app.png"><img alt="heroku create a new app page" src="../images/heroku-create-app.png" /></a></p>
<p>When there, fill in the details for your application and hit <code>Create App</code>. This will take you on to your new app page:</p>
<p><a href="../images/heroku-created-app.png"><img alt="heroku newly created app" src="../images/heroku-created-app.png" /></a></p>
<p>Hooray! An app is born!</p>
<h3 id="step-2-create-a-pipeline-and-deploy">Step 2: Create a pipeline and deploy</h3>
<p>Now, our app doesn't actually do anything yet. Let's fix that.</p>
<p>You'll be prompted to add this app to a pipeline at the top of the page. Click to create a new pipeline and fill in the details:</p>
<p><a href="../images/heroku-create-pipeline.png"><img alt="heroku pipeline creation" src="../images/heroku-create-pipeline.png" /></a></p>
<p>This will forward you on to the newly created pipeline:</p>
<p><a href="../images/heroku-pipeline-created.png"><img alt="heroku newly created pipeline" src="../images/heroku-pipeline-created.png" /></a></p>
<p>When here, click the prompt to <code>Connect to Github</code>. If you don't see this prompt, then navigate to the <code>Settings</code> tab. Once on this page, search for your GitHub repo then connect.</p>
<p><a href="../images/heroku-pipeline-connected.png"><img alt="heroku connected pipeline" src="../images/heroku-pipeline-connected.png" /></a></p>
<p>While you're here, I'd really recommend enabling <a href="https://devcenter.heroku.com/articles/github-integration-review-apps">review apps</a>. You can see the settings we recommend in the image below:</p>
<p><a href="../images/heroku-review-settings.png"><img alt="heroku connected pipelione enable review apps" src="../images/heroku-review-settings.png" /></a></p>
<p>They'll give you a great way to interact with pull request changes before merging. Springboard comes with an <code>app.json</code> file configured that specifies the required postgres database for your review apps. If you'd like to add other addons for each review app, then you can do so by modifying <code>app.json</code>. Heroku will respect the changes on the next deploy.</p>
<h3 id="step-3-enable-automatic-deploys">Step 3: Enable automatic deploys</h3>
<p>Navigate back to the <code>Pipeline</code> tab to see the new setup.</p>
<p><a href="../images/heroku-pipeline-with-review.png"><img alt="springboard pipeline with review apps" src="../images/heroku-pipeline-with-review.png" /></a></p>
<p>We'll add a staging environment here later. For now, let's enable automatic deploys. Click the menu toggle button on the production app.</p>
<p><a href="../images/heroku-pipeline-deploy-settings.png"><img alt="springboard pipeline with deploy" src="../images/heroku-pipeline-deploy-settings.png" /></a></p>
<p>And click <code>Configure automatic deploys...</code>. You'll be presented with some options. We recommend deploying master only after CI passes. </p>
<p><a href="../images/heroku-automatic-deploys.png"><img alt="springboard pipeline with deploy" src="../images/heroku-automatic-deploys.png" /></a></p>
<p>And we're set! This means that the next time we merge into <code>master</code> we'll see our application automatically updated!</p>
<h3 id="step-4-making-a-change">Step 4: Making a change</h3>
<p>Let's make a tiny change. I've added a new empty line between two tags in <code>src/webapp/src/templates/pages/index.peb</code>. You could do something more dramatic here of course.</p>
<p>Commit this change on a feature branch <code>feature/example</code> and push to github. Now go to your repo in the browser and you'll 
be prompted to open a pull-request. Click the <code>Compare &amp; pull request...</code> button, fill out the form on this page and then 
create the pull request. </p>
<p><a href="../images/github-pull-request-ci-running.png"><img alt="github pull request with CI running" src="../images/github-pull-request-ci-running.png" /></a></p>
<p>Alright! Now go make a cup of coffee while the CI build runs. Springboard has a longer build than a base Spring Boot project, 
but we promise it's worth it. Right now GitHub is running unit, integration and feature tests on the back-end and has 
kicked off Cypress to test your front-end. Once it's done, you should see something like this:</p>
<p><a href="../images/github-pull-request-review-created.png"><img alt="pull request with deployment" src="../images/github-pull-request-review-created.png" /></a></p>
<p>Click the <code>View deployment</code> button and... Ta-da!</p>
<p><a href="../images/review-app-deployed.png"><img alt="pull request with deployment" src="../images/review-app-deployed.png" /></a></p>
<p>Our review app is live! This has its own Heroku Postgres instance spun up, so we can play around with it without impacting 
a shared database. Note: we've still not finished the setup for our production app yet - read on to finish the required setup.</p>
<h3 id="step-5-merging-to-master-and-deploying-to-production">Step 5: Merging to master and deploying to production</h3>
<p>Now we've done some QA on our review app, we'll merge the pull request and deploy to production. Normally, this is 
where a teammate would review our change, but for now we can safely click the <code>Merge</code> button and carry on solo.</p>
<p>Upon merging the pull request, the review app instance will be spun down - saving us some money/free dyno hours. At this point you can head back to the heroku pipeline to view the deploy logs.</p>
<p><a href="../images/heroku-deploy-logs.png"><img alt="heroku deployment in progress" src="../images/heroku-deploy-logs.png" /></a></p>
<p>Give it a couple of minutes to run and your app will be deployed! You can also check in on the deployment in the GitHub environment screen, by clicking the <code>environments</code> button on your repo's home page.</p>
<p><a href="../images/github-env-pending.png"><img alt="github env is pending" src="../images/github-env-pending.png" /></a></p>
<p>Once the app has been deployed, this will change to read <code>Deployed</code>. </p>
<p>Click the <code>View deployment</code> button...and it's broken! Why did production break when the review app works? </p>
<p>Springboard comes with an <code>app.json</code> file that acts as a configuration for Heroku review apps. This file contains configuration 
for our postgres database so that Heroku knows to spin one up for each review app. Unfortunately, the <code>app.json</code> file 
doesn't have any impact on production, so we'll have to do the initial setup manually. This is a one-time thing. 
Automated provisioning of these resources is out of the scope of this tutorial, but you could checkout the 
<a href="https://devcenter.heroku.com/articles/using-terraform-with-heroku">Heroku docs on Terraform</a> if it's something you're interested in.</p>
<h3 id="step-6-spinning-up-the-production-database">Step 6: Spinning up the production database</h3>
<p>Navigate over to the application in Heroku and go to the resources tab:</p>
<p><a href="../images/heroku-resources.png"><img alt="heroku app resources" src="../images/heroku-resources.png" /></a></p>
<p>And provision a free database:</p>
<p><a href="../images/heroku-postgres-free.png"><img alt="Adding the heroku postgres addon" src="../images/heroku-postgres-free.png" /></a></p>
<p>Now click <code>More</code> at the top right and <code>Restart all dynos</code>. Now - after the restart completes - we can try clicking <code>Open App</code> again...</p>
<p><a href="../images/deploy-success.png"><img alt="Deployment was successful" src="../images/deploy-success.png" /></a></p>
<p>Success! Our app is now live in production!</p>
<h3 id="step-7-reflect-on-the-result">Step 7: Reflect on the result</h3>
<p>To conclude, we now have:</p>
<ul>
<li>an automated process that runs all of our tests for a pull request;</li>
<li>on test success deploys the pull request code to a unique, isolated environment;</li>
<li>on merge deletes the review application automatically; and</li>
<li>deploys the change to production.</li>
</ul>
<p>This is incredibly powerful. Whether you're working solo or in a team, we think having a way to easily review and trial changes before 
letting a customer get access to them is the way forward. There's more yet to do though! Continue on below to allow your application to send email,
report errors to sentry and to have a long-lived staging environment for QA.</p>
<h2 id="connecting-the-cli">Connecting the CLI</h2>
<p>So far, everything we've done has made use of the Heroku website. Moving forward, we'll be provisioning extra add-ons using the <a href="https://devcenter.heroku.com/articles/heroku-cli">CLI</a>. This makes simple tasks much easier and gives us access to some more tooling
 - such as being able to stream logs with <code>heroku logs --tail</code>.</p>
<p>Use the <a href="https://devcenter.heroku.com/articles/heroku-cli">documentation</a> to install and login to the CLI before going forward.</p>
<p>Once you have the CLI installed, navigate to your project in the terminal and run <code>heroku git:remote -a $MY_PROJECT_NAME</code> 
where <code>$MY_PROJECT_NAME</code> is the name of your heroku app. You should see output like the image below:</p>
<p><a href="../images/cli-setup.png"><img alt="heroku cli connected" src="../images/cli-setup.png" /></a></p>
<p>And you're set!</p>
<h2 id="adding-mailgun">Adding Mailgun</h2>
<p>Now we have a live application, we'd like to make use of the other features that Springboard gives us
out of the box. First up: email. We're using Mailgun here, but since Springboard leverages spring-mail (which in turn just 
uses SMTP) you can feel free to substitute for your favourite SMTP email provider.</p>
<h3 id="step-1-adding-mailgun-to-your-production-application">Step 1: Adding Mailgun to your production application</h3>
<p>Navigate to your project on your machine and run the following command:</p>
<div class="codehilite"><pre><span></span><code>heroku addons:create mailgun:starter 
</code></pre></div>


<p>You'll see output like the following:</p>
<p><a href="../images/added-mailgun.png"><img alt="heroku mailgun added" src="../images/added-mailgun.png" /></a></p>
<p>Looking at this output, we see that the Mailgun add-on has added a bunch of environment variables to our application. 
We'll need to update our app to reflect this... right?</p>
<h3 id="step-2-updating-application-to-use-env-variables">Step 2: Updating application to use env variables</h3>
<p>Wrong! Head over to <code>src/main/resources/application.properties</code> in your editor of choice. You'll see we have some properties 
that rely on the <code>MAILGUN_</code> environment variables we've just configured:</p>
<p><a href="../images/mail-settings.png"><img alt="mail settings for spring" src="../images/mail-settings.png" /></a></p>
<p>Great! This means that we don't have to do anything else to make this work. If there are <code>MAILGUN_</code> env variables then 
we'll send email successfully. If these variables aren't passed at runtime, then Springboard will silently fall back on a 
<code>LoggingMailSender</code> that just logs each message.</p>
<p>If you decided to use a different mail provider, you'll be able to modify these settings to respect whatever environment variables
that add-on injects in this file. This is out of the scope of this tutorial.</p>
<h2 id="adding-jvm-metrics">Adding JVM metrics</h2>
<p>Heroku offers <a href="https://devcenter.heroku.com/articles/language-runtime-metrics">language specific metrics</a> for applications 
running on any paid dyno tier (so Hobby and up).  </p>
<p>This includes JVM specific metrics around things like garbage collection and heap usage. You can read more about the JVM specific metrics 
on offer <a href="https://devcenter.heroku.com/articles/language-runtime-metrics-jvm">here</a>.</p>
<h3 id="step-1-adding-the-metrics-to-the-app">Step 1: Adding the metrics to the app</h3>
<p>We'll be adding the JVM metrics integration to our production app. To enable these metrics, navigate to your app in the 
terminal and run <code>heroku labs:enable "runtime-heroku-metrics"</code>. This should result in output:</p>
<p><a href="../images/enable-metrics-cli.png"><img alt="heroku enable jvm metrics output" src="../images/enable-metrics-cli.png" /></a></p>
<p>Once that's done, you must re-deploy the dynos for the app. You can do this by running the <code>heroku dyno:restart</code> command 
in the terminal. This will result in output:</p>
<p><a href="../images/heroku-restart-cli.png"><img alt="heroku restart dyno in cli" src="../images/heroku-restart-cli.png" /></a></p>
<p>It will take a few minutes for these metrics to show up so feel free to stop here for a cup of coffee.</p>
<h3 id="step-2-viewing-the-metrics">Step 2: Viewing the metrics</h3>
<p>Head back to your Heroku app in the browser and open the <code>Metrics</code> tab.</p>
<p><a href="../images/heroku-metrics-screen.png"><img alt="heroku metrics screen" src="../images/heroku-metrics-screen.png" /></a></p>
<p>On this page you'll see a bunch of metrics about your app in production. These include metrics around requests per second, 
request latency and more. If you scroll down then you should see the newly added JVM metrics:</p>
<p><a href="../images/heroku-jvm-metrics.png"><img alt="heroku jvm metrics screen" src="../images/heroku-jvm-metrics.png" /></a></p>
<p>And that's it! It's due to this kind of simplicity that we love Heroku.</p>
<h2 id="adding-staging">Adding staging</h2>
<p>TODO</p>
<h2 id="adding-sentry">Adding Sentry</h2>
<p>Production monitoring is a tricky thing to get right. A great starting point in our opinion is enabling Sentry to track 
errors both on the app server and in the user's browser. Springboard comes with Sentry pre-configured so it's as easy as 
turning it on!</p>
<h3 id="step-1-enable-sentry-in-heroku">Step 1: Enable sentry in Heroku</h3>
<p>Heroku has a <a href="https://elements.heroku.com/addons/sentry">Sentry add-on</a> that works with Springboard out of the box. To 
enable it, navigate to your project in the terminal and run: <code>heroku addons:create sentry:f1</code>. You'll get output:</p>
<p><a href="../images/enable-sentry-cli.png"><img alt="enabling sentry heroku cli" src="../images/enable-sentry-cli.png" /></a></p>
<p>Now let's restart our dyno using the <code>heroku dyno:restart</code> command. Go have a cold glass of water. This'll be done by the time you're back.</p>
<h3 id="step-2-viewing-our-new-dashboard">Step 2: Viewing our new dashboard</h3>
<p>The Heroku CLI gives us a convenient way to access our Sentry instance. Run <code>heroku addons:open sentry</code> and be amazed as your 
browser opens and uses single-sign-on to log you in.</p>
<p><a href="../images/sentry-dashboard.png"><img alt="sentry empty dashboard" src="../images/sentry-dashboard.png" /></a></p>
<p>There won't be any activity here yet. Let's head over to our application and throw an error.</p>
<h3 id="step-3-throwing-an-error">Step 3: Throwing an error</h3>
<p>Springboard integrates with Sentry at two points. It configures Sentry for Spring so that any unhandled exceptions on the server 
are recorded, and it adds a JS snippet to the rendered page in the browser so that we track any JS errors client-side. Let's leverage the 
latter to throw an error. Open the developer tools in your favourite browser and throw an error for Sentry:</p>
<p><a href="../images/error-thrown.png"><img alt="browser throwing error" src="../images/error-thrown.png" /></a></p>
<p>And see it appear in the Sentry dashboard:</p>
<p><a href="../images/sentry-with-error.png"><img alt="sentry dashboard with error" src="../images/sentry-with-error.png" /></a></p>
<p>Ta-da!</p>
<h3 id="step-4-optional-integrate-with-sentry-release">Step 4: (Optional) Integrate with Sentry release</h3>
<p>By integrating with the Sentry release functionality we can see useful information about which version of our application
is throwing errors. </p>
<h4 id="easy-option">Easy option</h4>
<p>We recommend using the <a href="https://devcenter.heroku.com/articles/dyno-metadata">Heroku Labs: Dyno Metadata</a> functionality in Heroku
to have the commit SHA env variable available at runtime. We run the command <code>heroku labs:enable runtime-dyno-metadata</code>,
then redeploy the application by making a small change and pushing to GitHub or by using the Manual Deploy button in the 
application's deploy settings on Heroku itself. Once this is done, you can run the <code>heroku config</code> command to see the commit SHA
being passed as an env variable:</p>
<p><a href="../images/heroku-config-release.png"><img alt="heroku config with runtime release env variables" src="../images/heroku-config-release.png" /></a></p>
<p>By default, Springboard allows source maps in production - see motivation 
<a href="https://m.signalvnoise.com/paying-tribute-to-the-web-with-view-source/">here</a> - which makes debugging errors in production a little easier. </p>
<p>Despite this, we recommend hooking <a href="https://docs.sentry.io/workflow/integrations/global-integrations/#github">Sentry up to your GitHub repo</a> 
so that it can show the source code for errors thrown. If you don't use GitHub then there are alternatives with 
documentation <a href="https://docs.sentry.io/workflow/integrations/global-integrations/#issue-management">here</a>.</p>
<h4 id="harder-option">Harder option</h4>
<p>Sentry recommends using GitHub actions to set up Sentry with runtime information and releases. We haven't gotten around to 
doing this for Springboard yet, but you can follow their guidelines <a href="https://blog.sentry.io/2019/12/17/using-github-actions-to-create-sentry-releases">here</a>.</p>
<h2 id="adding-logdna">Adding LogDNA</h2>
<p><a href="https://logdna.com/">LogDNA</a> is a log aggregation product that includes a bunch of nice features at a reasonable price. 
If you'd like to use something else, then feel free! Springboard logs to STDOUT in a JSON format in production, so you should 
be able to use almost any log aggregation product. </p>
<p>We'll be using the Heroku add-on to <a href="https://elements.heroku.com/addons/logdna">deploy this</a>.</p>
<h3 id="step-1-enabling-the-add-on">Step 1: Enabling the add-on</h3>
<p>First, let's run the Heroku CLI command <code>heroku addons:create logdna:quaco</code> to enable the free tier of logdna:</p>
<p><a href="../images/heroku-cli-logdna.png"><img alt="enabling logdna in heroku cli" src="../images/heroku-cli-logdna.png" /></a></p>
<p>Nothing more to see here really.</p>
<h3 id="step-2-opening-logdna">Step 2: Opening logdna</h3>
<p>Let's use the Heroku CLI to open logdna. Run <code>heroku addons:open logdna</code> in the terminal in your application directory and 
you'll be taken to logdna:</p>
<p><a href="../images/logdna-dashboard.png"><img alt="logdna dashboard" src="../images/logdna-dashboard.png" /></a></p>
<p>Huzzah! Here we can see everything that's logged by every running dyno for our production application. There are a bunch of features 
in logdna that are worth exploring. You can find out more in their <a href="https://docs.logdna.com/docs">documentation</a>.</p>
<p>Log aggregation doesn't depend on much in the way of application behaviour, so there's nothing specific to Springboard here really.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../.." title="Welcome to Springboard" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Welcome to Springboard
              </div>
            </div>
          </a>
        
        
          <a href="../../tutorials/static/" title="How to add a static page" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                How to add a static page
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.a0c4167b.min.js"></script>
      <script src="../../assets/javascripts/bundle.fb26dd1d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>